From 99e7fc21ea0bfc32db6d19ef92a67326a6d2aaf3 Mon Sep 17 00:00:00 2001
From: kevin <kevin.wang2004@hotmail.com>
Date: Fri, 18 Apr 2014 15:01:36 +0800
Subject: [PATCH 4/4] =?UTF-8?q?=E6=B7=BB=E5=8A=A0=E4=B8=80=E4=B8=AA?=
 =?UTF-8?q?=E6=8E=A2=E5=A4=B4=E9=85=8D=E7=BD=AE=E7=B1=BB?=
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit

---
 src/EVA11/base/DebugView.cpp            |  23 ++++
 src/EVA11/base/DebugView.h              |   1 +
 src/EVA11/base/Language/Language.cpp    |   8 ++
 src/EVA11/base/Language/ProjectGBText.h |  10 ++
 src/EVA11/base/ProbeConfigwin.cpp       | 201 ++++++++++++++++++++++++++++++++
 src/EVA11/base/ProbeConfigwin.h         |  59 ++++++++++
 6 files changed, 302 insertions(+)
 create mode 100644 src/EVA11/base/ProbeConfigwin.cpp
 create mode 100644 src/EVA11/base/ProbeConfigwin.h

diff --git a/src/EVA11/base/DebugView.cpp b/src/EVA11/base/DebugView.cpp
index 1f9963e..6aa0d7a 100644
--- a/src/EVA11/base/DebugView.cpp
+++ b/src/EVA11/base/DebugView.cpp
@@ -34,6 +34,10 @@
 
 #include 	"FreeType.h"
 
+#include 	"Label.h"
+#include 	"Basewin.h"
+#include 	"ProbeConfigwin.h"
+
 DebugView::DebugView (int x,int y,int width,int heigh)
 	: IView(x,y,width,heigh)
 {
@@ -173,7 +177,26 @@ void DebugView::Show_Help_System(Graphic& g,int x,int y)
 	font->Text(x+34,y+30,pl->GetText(HELPTITLE1));
 	font->Text(x+20,y+45,pl->GetText(HELPTITLE2));
 	font->Text(x+30,y+70,pl->GetText(HELPB1F1));
+	font->Text(x+30,y+90,pl->GetText(HELPB3F2));
 
 	font->Text(x+30,y+210,pl->GetText(HELPB1ESC));
 	font->Text(x+30,y+230,pl->GetText(HELPB1ENTER));
 }
+
+/* 
+ * ===  FUNCTION  ======================================================================
+ *         Name:  Key_F2_Fun
+ *  Description:  Do the F2 function 
+ * =====================================================================================
+ */
+int DebugView::Key_F2_Fun(Graphic& g)
+{
+	ProbeConfigwin *pcw = new ProbeConfigwin;
+
+	pcw->Loopwindow(g);
+
+	delete pcw;
+	pcw = NULL;
+
+	return 0;
+}
diff --git a/src/EVA11/base/DebugView.h b/src/EVA11/base/DebugView.h
index 0c6b80c..56a8fc6 100644
--- a/src/EVA11/base/DebugView.h
+++ b/src/EVA11/base/DebugView.h
@@ -39,6 +39,7 @@ class DebugView : public IView
 		virtual void Drawme (Graphic&);
 		virtual void Switch_View(); 
 
+		virtual int Key_F2_Fun(Graphic& g); 
 	protected:
 		void Init_GUI(Graphic& g);
 		void Destroy_GUI();
diff --git a/src/EVA11/base/Language/Language.cpp b/src/EVA11/base/Language/Language.cpp
index b9eb0b0..b3d31b4 100644
--- a/src/EVA11/base/Language/Language.cpp
+++ b/src/EVA11/base/Language/Language.cpp
@@ -476,6 +476,10 @@ char const *Language::Get_EN_Text(int index)
 			return XGAINRATIO_EN;
 		case YGAINRATIO:
 			return YGAINRATIO_EN;
+		case HELPB3F2:
+			return HELPB3F2_EN;
+		case PROBECONFIG:
+			return PROBECONFIG_EN;
 		default:
 			return NONE_EN;
 	}
@@ -906,6 +910,10 @@ char const *Language::Get_CN_Text(int index)
 			return XGAINRATIO_CN;
 		case YGAINRATIO:
 			return YGAINRATIO_CN;
+		case HELPB3F2:
+			return HELPB3F2_CN;
+		case PROBECONFIG:
+			return PROBECONFIG_CN;
 		default:
 			return NONE_CN;
 	}
diff --git a/src/EVA11/base/Language/ProjectGBText.h b/src/EVA11/base/Language/ProjectGBText.h
index abf8a49..806f830 100644
--- a/src/EVA11/base/Language/ProjectGBText.h
+++ b/src/EVA11/base/Language/ProjectGBText.h
@@ -80,6 +80,7 @@
 #define HELPTITLE2_CN               "===================================="
 #define HELPB1F1_CN                 "  [  F1    ]      ½øÈë/ÍË³ö°ïÖúÏµÍ³"
 #define HELPB1F2_CN                 "  [  F2    ]      ÇåÆÁ | Çå³ýµ×Æ¬"
+#define HELPB3F2_CN                 "  [  F2    ]      ÏÔÊ¾È«Ì½Í·²ÎÊý"
 #define HELPB1F3_CN                 "  [  F3    ]      ÏÔÊ¾·½Ê½ µã->Ïß->Ïû"
 #define HELPB1F3_O_CN               "  [  F3    ]      ÏÔÊ¾·½Ê½ µã->Ïß->ÌØÊâ"
 #define HELPB1F5_CN                 "  [  F5    ]      ½ØÈ¡ÆÁÄ»" 
@@ -290,6 +291,8 @@
 #define XGAINRATIO_CN               "XÔöÒæ±È"
 #define YGAINRATIO_CN               "YÔöÒæ±È"
 
+#define PROBECONFIG_CN              "Ì½ Í· Åä ÖÃ ±í"
+
 #define	NONE_CN			    "  "
 /* ********************************************************************  */
 
@@ -352,6 +355,7 @@
 #define HELPTITLE2_EN               "==============================================="
 #define HELPB1F1_EN                 "  [  F1    ]      Enter/Quit Help System"
 #define HELPB1F2_EN                 "  [  F2    ]      Clean Screen | Make Plate"
+#define HELPB3F2_EN                 "  [  F2    ]      Display All Probe Configrature"
 #define HELPB1F3_EN                 "  [  F3    ]      Mode: Point->Lin.->Aut."
 #define HELPB1F3_O_EN               "  [  F3    ]      Mode: Point->Lin.->Spe."
 #define HELPB1F5_EN                 "  [  F5    ]      Save Screen" 
@@ -560,6 +564,8 @@
 #define XGAINRATIO_EN               "X Gain Ratio"
 #define YGAINRATIO_EN               "Y Gain Ratio"
 
+#define PROBECONFIG_EN              "Probe Configrature Bill"
+
 #define	NONE_EN			    "  "
 /* ********************************************************************  */
 
@@ -832,6 +838,10 @@
 #define XGAINRATIO		    209
 #define YGAINRATIO	            210
 
+#define HELPB3F2		    211
+
+#define PROBECONFIG		    212
+
 #define	NONE			    999
 
 #endif
diff --git a/src/EVA11/base/ProbeConfigwin.cpp b/src/EVA11/base/ProbeConfigwin.cpp
new file mode 100644
index 0000000..cdfae02
--- /dev/null
+++ b/src/EVA11/base/ProbeConfigwin.cpp
@@ -0,0 +1,201 @@
+/*
+ * =====================================================================================
+ *
+ *       Filename:  ProbeConfigwin.cpp
+ *
+ *    Description:  Implementation of ProbeConfigwin class 
+ *
+ *        Version:  1.0
+ *        Created:  2014å¹´04æœˆ18æ—¥ 11æ—¶13åˆ†32ç§’
+ *       Revision:  none
+ *       Compiler:  gcc
+ *
+ *         Author:  YOUR NAME (), 
+ *   Organization:  
+ *
+ * =====================================================================================
+ */
+#include 	"Graphic.h"
+#include 	"Object.h"
+#include 	"Label.h"
+#include 	"Basewin.h"
+#include	"Label.h"
+#include 	"Language/Language.h"
+#include	"Global.h"
+#include 	"Msgbox.h"
+
+#include 	"ProbeConfigwin.h"
+
+ProbeConfigwin::ProbeConfigwin ()
+{
+}
+
+ProbeConfigwin::~ProbeConfigwin ()
+{
+}
+
+/* 
+ * ===  FUNCTION  ======================================================================
+ *         Name:  Init_GUI
+ *  Description:  Init the GUI object
+ * =====================================================================================
+ */
+void ProbeConfigwin::Init_GUI(Graphic& g)
+{
+	Basewin::Init_GUI(g);
+
+	m_Title = new Label(250,12,140,30);
+		m_Title->Set_Text(m_pl->GetText(PROBECONFIG));
+	m_Title->Set_Label_Type(Label::LA_NONE);
+	m_Title->Set_Label_Color(Label::LA_BGNO_COLOR,g_MAINBG_CO);
+	m_Title->Set_Label_Color(Label::LA_FGNO_COLOR,g_BUTXNO_CO);
+
+	if 	( m_gp->Language == 1 )
+		m_Title->Set_Font_Size(16);
+	else if ( m_gp->Language == 0 )
+		m_Title->Set_Font_Size(26);
+
+	for ( int i=0;i<MAXBOMCOUNT;i++ )
+	{
+		m_BomButton[i]->Set_Text(Get_Bom_Text(i));
+	}
+}
+
+/* 
+ * ===  FUNCTION  ======================================================================
+ *         Name:  Destroy_GUI
+ *  Description:  Destroy thr GUI object
+ * =====================================================================================
+ */
+void ProbeConfigwin::Destroy_GUI()
+{
+	if 	( m_Title    != NULL ) delete m_Title;
+
+	Basewin::Destroy_GUI();
+}
+
+/* 
+ * ===  FUNCTION  ======================================================================
+ *         Name:  Drawme
+ * Description:  Evey Windows class ues this function to draw himself on screen
+ * =====================================================================================
+ */
+void ProbeConfigwin::Drawme(Graphic &g)
+{
+	Basewin::Drawme(g);
+	m_Title->Drawme(g);
+}
+
+/*
+ * ===  FUNCTION  ======================================================================
+ *         Name:  Loopwindow
+ *  Description:  Very important function
+ * =====================================================================================
+ */
+int  ProbeConfigwin::Loopwindow(Graphic &g)
+{
+	Save_Screen_Into_Memory(g);
+	int result    = 0;
+
+	Init_GUI(g);
+
+	Drawme(g);
+
+	while( 1 )
+	{
+		result = Command_Process(g);
+		if 	( result == CO_EXIT )
+			goto Exit;
+		else if ( result == CO_OK )
+		{
+			result = CO_OK;
+			goto Exit;
+		}
+	}
+
+Exit:
+	Destroy_GUI();
+	Restore_Screen_From_Memory(g);
+	return result;
+}
+
+/* 
+ * ===  FUNCTION  ======================================================================
+ *         Name:  Get_Bom_Text
+ *  Description:  Get the help screen buttons text
+ * =====================================================================================
+ */
+const char* ProbeConfigwin::Get_Bom_Text(int index)
+{
+	switch ( index ) 
+	{
+		case 0: 
+			return m_pl->GetText(PGUP);
+			break;
+		case 1: 
+			return m_pl->GetText(PGDN);
+			break;
+		case 2: 
+			return m_pl->GetText(CLEAN);
+			break;
+		case 3: 
+			return m_pl->GetText(NONE);
+			break;
+		case 4: 
+			return m_pl->GetText(BACKOUT);
+			break;
+		default:	
+			return m_pl->GetText(NONE);
+			break;
+	}
+}
+
+/* 
+ * ===  FUNCTION  ======================================================================
+ *         Name:  DrawBottomFocus
+ *  Description:  As the input parameter index to set the bottoms button status  
+ * =====================================================================================
+ */
+void ProbeConfigwin::DrawBottomFocus(Graphic& g,int index)
+{
+	Basewin::DrawBottomFocus(g,index);
+}
+
+/* 
+ * ===  FUNCTION  ======================================================================
+ *         Name:  Key_Fun
+ *  Description:  Dealwith each key function 
+ * =====================================================================================
+ */
+int ProbeConfigwin::Key_Bom1_Fun(Graphic& g)
+{
+	DrawBottomFocus(g,1);
+	return CO_NONE;
+}
+int ProbeConfigwin::Key_Bom2_Fun(Graphic& g)
+{
+	DrawBottomFocus(g,2);
+	return CO_NONE;
+}
+int ProbeConfigwin::Key_Bom3_Fun(Graphic& g)
+{
+	DrawBottomFocus(g,3);
+	return CO_NONE;
+}
+int ProbeConfigwin::Key_Bom4_Fun(Graphic& g)
+{
+	DrawBottomFocus(g,4);
+	return CO_NONE;
+}
+int ProbeConfigwin::Key_Bom5_Fun(Graphic& g)
+{
+	DrawBottomFocus(g,5);
+	return CO_EXIT;
+}
+int ProbeConfigwin::Key_Enter_Fun(Graphic& g)
+{
+}
+int ProbeConfigwin::Key_Esc_Fun(Graphic& g)
+{
+	return CO_EXIT;
+}
diff --git a/src/EVA11/base/ProbeConfigwin.h b/src/EVA11/base/ProbeConfigwin.h
new file mode 100644
index 0000000..1e86739
--- /dev/null
+++ b/src/EVA11/base/ProbeConfigwin.h
@@ -0,0 +1,59 @@
+/*
+ * =====================================================================================
+ *
+ *       Filename:  ProbeConfigwin.h
+ *
+ *    Description:  The head of ProbeConfigwin class 
+ *
+ *        Version:  1.0
+ *        Created:  2014å¹´04æœˆ18æ—¥ 11æ—¶03åˆ†15ç§’
+ *       Revision:  none
+ *       Compiler:  gcc
+ *
+ *         Author:  YOUR NAME (), 
+ *   Organization:  
+ *
+ * =====================================================================================
+ */
+
+#ifndef  PROBECONFIGWIN_INC
+#define  PROBECONFIGWIN_INC
+
+#include "standard.h"
+
+class ProbeConfigwin : public Basewin
+{
+	public:
+		ProbeConfigwin ();
+		~ProbeConfigwin ();
+
+		virtual int  Loopwindow(Graphic &g);
+	protected:
+		void Init_GUI(Graphic& g);
+		void Destroy_GUI();
+		void Drawme(Graphic &g);
+
+		virtual int Key_Bom1_Fun(Graphic& g) ;
+		virtual int Key_Bom2_Fun(Graphic& g) ;
+		virtual int Key_Bom3_Fun(Graphic& g) ;
+		virtual int Key_Bom4_Fun(Graphic& g) ;
+		virtual int Key_Bom5_Fun(Graphic& g) ;
+
+		virtual int Key_Esc_Fun(Graphic& g)  ;
+		virtual int Key_Enter_Fun(Graphic& g);
+
+		virtual void DrawBottomFocus(Graphic& g,int index);
+
+	private:
+		const char* Get_Bom_Text(int index);
+		void Load_OPeration_Log();
+
+	private:
+		Label  				    *m_Title;
+		Label				    *m_Page;
+
+		int 				     m_BottomFocus;
+
+}; /* -----  end of class ProbeConfigwin  ----- */
+
+#endif   /* ----- #ifndef PROBECONFIGWIN_INC  ----- */
-- 
1.8.5.1

